(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6283:(e,s,a)=>{Promise.resolve().then(a.bind(a,6866))},6866:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var t=a(5155),i=a(2115),n=a(7909),r=a(1607),c=a(877);function l(e){let{data:s}=e,a=s.map((e,s)=>"Ping "+(s+1));return 0===s.length?(0,t.jsx)("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666"},children:"Run a test to see latency chart"}):(0,t.jsx)(c.N1,{data:{labels:a,datasets:[{label:"RTT (ms)",data:s,borderColor:"#f38020",backgroundColor:"rgba(243, 128, 32, 0.2)",tension:.2,fill:!0}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})}function o(e){let{metrics:s}=e;return(0,t.jsxs)("div",{className:"cards",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{children:"Average RTT"}),(0,t.jsx)("p",{children:s.avgRtt})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{children:"Jitter"}),(0,t.jsx)("p",{children:s.jitter})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{children:"ASN"}),(0,t.jsx)("p",{children:s.asn})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{children:"Location"}),(0,t.jsx)("p",{children:s.location})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{children:"PoP"}),(0,t.jsx)("p",{children:s.colo})]})]})}function d(){let[e,s]=(0,i.useState)("IAD"),[a,n]=(0,i.useState)(""),[r,c]=(0,i.useState)(!1),l=async()=>{c(!0);try{var s,a,t,i,r,l,o;let c,d=await fetch("/api/ai?colo=".concat(e)),m=await d.text();console.log("AI raw response:",m);try{c=JSON.parse(m)}catch(e){n("❌ Error: Response was not JSON\n\n".concat(m));return}n("PoP: ".concat(e,"\n")+"Avg RTT: ".concat((null==(t=c.summary)||null==(a=t.avgRtt)||null==(s=a.toFixed)?void 0:s.call(a,2))||"N/A"," ms\n")+"Jitter: ".concat((null==(l=c.summary)||null==(r=l.avgJitter)||null==(i=r.toFixed)?void 0:i.call(r,2))||"N/A"," ms\n")+"Count: ".concat((null==(o=c.summary)?void 0:o.count)||"N/A","\n\n")+"\uD83E\uDD16 AI Insight: ".concat(c.insights||"No insights available"))}catch(e){n("❌ Error fetching insights: ".concat(e))}finally{c(!1)}};return(0,t.jsxs)("div",{className:"ai-section",children:[(0,t.jsx)("h2",{children:"AI Insights"}),(0,t.jsxs)("select",{value:e,onChange:e=>s(e.target.value),children:[(0,t.jsx)("option",{value:"IAD",children:"Ashburn (IAD)"}),(0,t.jsx)("option",{value:"ORD",children:"Chicago (ORD)"}),(0,t.jsx)("option",{value:"EWR",children:"Newark (EWR)"})]}),(0,t.jsx)("button",{onClick:l,disabled:r,className:"test-button",children:r?"Loading...":"Get Insights"}),a&&(0,t.jsx)("pre",{className:"ai-output",children:a})]})}function m(){let[e,s]=(0,i.useState)([]),[a,n]=(0,i.useState)(""),[r,c]=(0,i.useState)(!1),[l]=(0,i.useState)(()=>"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),[o,d]=(0,i.useState)({}),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,i.useEffect)(()=>{s([{role:"assistant",content:"Hello! I'm CloudflareNet AI, your network engineering assistant. I can help you analyze latency data, predict network congestion, and optimize your Cloudflare PoP performance. What would you like to know?",timestamp:new Date().toISOString()}])},[]);let h=async()=>{if(!a.trim()||r)return;let e={role:"user",content:a,timestamp:new Date().toISOString()};s(s=>[...s,e]),n(""),c(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:l,message:a,context:o})}),t=await e.json();if(e.ok){let e={role:"assistant",content:t.message.content,timestamp:t.message.timestamp};s(s=>[...s,e]),d(t.context||{})}else{let e={role:"assistant",content:"❌ Error: ".concat(t.error),timestamp:new Date().toISOString()};s(s=>[...s,e])}}catch(a){let e={role:"assistant",content:"❌ Network error: ".concat(a),timestamp:new Date().toISOString()};s(s=>[...s,e])}finally{c(!1)}};return(0,t.jsxs)("div",{className:"chat-container",children:[(0,t.jsxs)("div",{className:"chat-header",children:[(0,t.jsx)("h3",{children:"CloudflareNet AI Assistant"}),(0,t.jsx)("p",{children:"Ask me anything about network performance and optimization"})]}),(0,t.jsxs)("div",{className:"chat-messages",children:[e.map((e,s)=>(0,t.jsx)("div",{className:"message ".concat(e.role),children:(0,t.jsxs)("div",{className:"message-content",children:["assistant"===e.role&&(0,t.jsx)("div",{className:"ai-avatar",children:"AI"}),(0,t.jsxs)("div",{className:"message-text",children:[(0,t.jsx)("div",{className:"message-body",children:e.content}),(0,t.jsx)("div",{className:"message-time",children:new Date(e.timestamp).toLocaleTimeString()})]})]})},s)),r&&(0,t.jsx)("div",{className:"message assistant",children:(0,t.jsxs)("div",{className:"message-content",children:[(0,t.jsx)("div",{className:"ai-avatar",children:"AI"}),(0,t.jsx)("div",{className:"message-text",children:(0,t.jsxs)("div",{className:"typing-indicator",children:[(0,t.jsx)("span",{}),(0,t.jsx)("span",{}),(0,t.jsx)("span",{})]})})]})}),(0,t.jsx)("div",{ref:m})]}),(0,t.jsxs)("div",{className:"quick-questions",children:[(0,t.jsx)("p",{children:"Quick questions:"}),(0,t.jsx)("div",{className:"quick-buttons",children:["What's the current performance of IAD?","Which PoPs have the best latency?","Show me network congestion predictions","How can I optimize my network routing?","Analyze the trend for Chicago (ORD)"].map((e,s)=>(0,t.jsx)("button",{className:"quick-button",onClick:()=>n(e),disabled:r,children:e},s))})]}),(0,t.jsxs)("div",{className:"chat-input",children:[(0,t.jsx)("textarea",{value:a,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Ask about network performance, PoP analysis, or optimization...",rows:2,disabled:r}),(0,t.jsx)("button",{onClick:h,disabled:!a.trim()||r,className:"send-button",children:r?"...":"Send"})]})]})}function h(){var e;let[s,a]=(0,i.useState)("IAD"),[n,r]=(0,i.useState)(null),[c,l]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),x=["IAD","ORD","EWR","LAX","ATL","DFW","ABQ","ANC","AUS","BGR","BOS","BUF","CLT","CLE","CMH","DEN","DTW","DUR","HNL","IAH","IND","JAX","MCI","LAS","MFE","MEM","MIA","MSP","BNA","ORF","OKC","OMA","PHL","PHX","PIT","PDX","RIC","SMF","SLC","SAT","SAN","SFO","SJC","SEA","FSD","STL","TLH","TPA"],u=async e=>{d(!0),h(null);try{let s=await fetch("/api/ai/predict?colo=".concat(e)),a=await s.json();s.ok?r(a.prediction):h(a.error||"Failed to fetch prediction")}catch(e){h("Network error occurred")}finally{d(!1)}},j=async()=>{try{let e={totalPoPs:x.length,excellentPoPs:Math.floor(.4*x.length),goodPoPs:Math.floor(.35*x.length),poorPoPs:Math.floor(.2*x.length),criticalPoPs:Math.floor(.05*x.length),averageConfidence:87,topPerformingPoPs:["IAD","ORD","LAX","SFO","SEA"],atRiskPoPs:["MIA","ATL","DFW"]};l(e)}catch(e){console.error("Failed to fetch analytics overview:",e)}};return(0,i.useEffect)(()=>{u(s),j()},[s]),(0,t.jsxs)("div",{className:"predictive-analytics",children:[(0,t.jsxs)("div",{className:"analytics-header",children:[(0,t.jsx)("h2",{children:"Predictive Network Analytics"}),(0,t.jsx)("p",{children:"AI-powered congestion prediction and performance forecasting"})]}),c&&(0,t.jsxs)("div",{className:"overview-cards",children:[(0,t.jsxs)("div",{className:"overview-card",children:[(0,t.jsx)("h3",{children:"Network Overview"}),(0,t.jsxs)("div",{className:"overview-stats",children:[(0,t.jsxs)("div",{className:"stat",children:[(0,t.jsx)("span",{className:"stat-label",children:"Total PoPs"}),(0,t.jsx)("span",{className:"stat-value",children:c.totalPoPs})]}),(0,t.jsxs)("div",{className:"stat",children:[(0,t.jsx)("span",{className:"stat-label",children:"Excellent"}),(0,t.jsx)("span",{className:"stat-value excellent",children:c.excellentPoPs})]}),(0,t.jsxs)("div",{className:"stat",children:[(0,t.jsx)("span",{className:"stat-label",children:"Good"}),(0,t.jsx)("span",{className:"stat-value good",children:c.goodPoPs})]}),(0,t.jsxs)("div",{className:"stat",children:[(0,t.jsx)("span",{className:"stat-label",children:"Poor"}),(0,t.jsx)("span",{className:"stat-value poor",children:c.poorPoPs})]}),(0,t.jsxs)("div",{className:"stat",children:[(0,t.jsx)("span",{className:"stat-label",children:"Critical"}),(0,t.jsx)("span",{className:"stat-value critical",children:c.criticalPoPs})]})]})]}),(0,t.jsxs)("div",{className:"overview-card",children:[(0,t.jsx)("h3",{children:"Risk Assessment"}),(0,t.jsxs)("div",{className:"risk-info",children:[(0,t.jsxs)("div",{className:"risk-item",children:[(0,t.jsx)("span",{className:"risk-label",children:"Avg Confidence"}),(0,t.jsxs)("span",{className:"risk-value",children:[c.averageConfidence,"%"]})]}),(0,t.jsxs)("div",{className:"risk-item",children:[(0,t.jsx)("span",{className:"risk-label",children:"At Risk PoPs"}),(0,t.jsx)("span",{className:"risk-value",children:c.atRiskPoPs.join(", ")})]})]})]})]}),(0,t.jsxs)("div",{className:"prediction-section",children:[(0,t.jsxs)("div",{className:"prediction-controls",children:[(0,t.jsx)("select",{value:s,onChange:e=>a(e.target.value),className:"colo-selector",children:x.map(e=>(0,t.jsx)("option",{value:e,children:e},e))}),(0,t.jsx)("button",{onClick:()=>u(s),disabled:o,className:"refresh-button",children:o?"Analyzing...":"Refresh Analysis"})]}),m&&(0,t.jsxs)("div",{className:"error-message",children:["Error: ",m]}),n&&(0,t.jsxs)("div",{className:"prediction-results",children:[(0,t.jsxs)("div",{className:"prediction-header",children:[(0,t.jsxs)("h3",{children:["Analysis for ",n.colo]}),(0,t.jsxs)("div",{className:"confidence-badge",children:["Confidence: ",n.confidence,"%"]})]}),(0,t.jsxs)("div",{className:"prediction-metrics",children:[(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("div",{className:"metric-label",children:"Current Performance"}),(0,t.jsx)("div",{className:"metric-value",style:{color:(e=>{switch(e){case"excellent":return"#10B981";case"good":return"#3B82F6";case"poor":return"#F59E0B";case"critical":return"#EF4444";default:return"#6B7280"}})(n.currentPerformance)},children:n.currentPerformance.toUpperCase()})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("div",{className:"metric-label",children:"Predicted Congestion"}),(0,t.jsx)("div",{className:"metric-value",style:{color:(e=>{switch(e){case"low":return"#10B981";case"medium":return"#F59E0B";case"high":return"#EF4444";default:return"#6B7280"}})(n.predictedCongestion)},children:n.predictedCongestion.toUpperCase()})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("div",{className:"metric-label",children:"Next Hour RTT"}),(0,t.jsxs)("div",{className:"metric-value",children:[n.nextHourPrediction.toFixed(1),"ms"]})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("div",{className:"metric-label",children:"Trend"}),(0,t.jsxs)("div",{className:"metric-value",children:[(e=n.metrics.trend)>2?"\uD83D\uDCC8":e<-2?"\uD83D\uDCC9":"➡️",n.metrics.trend.toFixed(2),"ms/hr"]})]})]}),(0,t.jsxs)("div",{className:"detailed-metrics",children:[(0,t.jsx)("h4",{children:"Detailed Metrics"}),(0,t.jsxs)("div",{className:"metrics-grid",children:[(0,t.jsxs)("div",{className:"metric-item",children:[(0,t.jsx)("span",{className:"metric-name",children:"Average RTT"}),(0,t.jsxs)("span",{className:"metric-number",children:[n.metrics.avgRtt.toFixed(2),"ms"]})]}),(0,t.jsxs)("div",{className:"metric-item",children:[(0,t.jsx)("span",{className:"metric-name",children:"Average Jitter"}),(0,t.jsxs)("span",{className:"metric-number",children:[n.metrics.avgJitter.toFixed(2),"ms"]})]}),(0,t.jsxs)("div",{className:"metric-item",children:[(0,t.jsx)("span",{className:"metric-name",children:"Max RTT"}),(0,t.jsxs)("span",{className:"metric-number",children:[n.metrics.maxRtt.toFixed(2),"ms"]})]}),(0,t.jsxs)("div",{className:"metric-item",children:[(0,t.jsx)("span",{className:"metric-name",children:"Min RTT"}),(0,t.jsxs)("span",{className:"metric-number",children:[n.metrics.minRtt.toFixed(2),"ms"]})]}),(0,t.jsxs)("div",{className:"metric-item",children:[(0,t.jsx)("span",{className:"metric-name",children:"Data Points"}),(0,t.jsx)("span",{className:"metric-number",children:n.metrics.dataPoints})]})]})]}),(0,t.jsxs)("div",{className:"recommendations",children:[(0,t.jsx)("h4",{children:"AI Recommendations"}),(0,t.jsx)("ul",{className:"recommendations-list",children:n.recommendations.map((e,s)=>(0,t.jsx)("li",{className:"recommendation-item",children:e},s))})]}),(0,t.jsxs)("div",{className:"trend-analysis",children:[(0,t.jsx)("h4",{children:"Trend Analysis"}),(0,t.jsx)("p",{className:"trend-text",children:n.trendAnalysis})]})]})]})]})}r.t1.register(r.PP,r.kc,r.FN,r.No,r.hE,r.m_,r.s$,r.dN);let x=(0,n.default)(()=>Promise.all([a.e(761),a.e(98)]).then(a.bind(a,8098)),{loadableGenerated:{webpack:()=>[8098]},ssr:!1,loading:()=>(0,t.jsx)("div",{style:{height:"500px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff7f0",borderRadius:"8px",border:"1px solid #f38020"},children:"Loading map..."})});function u(){let[e,s]=(0,i.useState)({avgRtt:"--",jitter:"--",asn:"--",location:"--",colo:"--"}),[a,n]=(0,i.useState)([]),[r,c]=(0,i.useState)([]),[u,j]=(0,i.useState)(!1),v=async()=>{j(!0);let e=0,a=0,t=0,i=null,r=null,c=[];try{for(let s=0;s<15;s++){let n=performance.now(),l=await fetch("/api/ping"),o=performance.now();r=await l.json();let d=o-n;if(c.push(d),e+=(d-e)/(s+1),s>0&&null!==i){let e=Math.abs(d-i);a+=e,t=a/s}i=d}s({avgRtt:e.toFixed(2)+" ms",jitter:t.toFixed(2)+" ms",asn:(null==r?void 0:r.asn)||"--",location:"".concat((null==r?void 0:r.city)||"",", ").concat((null==r?void 0:r.country)||""),colo:(null==r?void 0:r.colo)||"--"}),n(c),r&&(await fetch("/api/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({colo:r.colo,timestamp:new Date().toLocaleString(),avg_rtt:e.toFixed(2),jitter:t.toFixed(2),asn:r.asn,country:r.country,city:r.city})}),await N())}catch(e){console.error("Error measuring latency:",e)}finally{j(!1)}},N=async()=>{try{let e=await fetch("/api/all_data");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();c(Array.isArray(s)?s:[])}catch(e){console.error("Map update failed:",e),c([])}};return(0,i.useEffect)(()=>{N()},[]),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,t.jsx)("h1",{children:"Cloudflare Edge Network Intelligence"}),(0,t.jsx)("p",{style:{color:"#94a3b8",fontSize:"1.1rem",marginTop:"0.5rem"},children:"Real-time monitoring and AI-powered network optimization"})]}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:(0,t.jsx)("button",{id:"testBtn",onClick:v,disabled:u,className:"test-button",children:u?"Analyzing Network...":"Run Network Analysis"})}),(0,t.jsx)(o,{metrics:e}),(0,t.jsxs)("div",{className:"main-content",children:[(0,t.jsxs)("div",{className:"tester-section",children:[(0,t.jsx)("div",{className:"chart-container",children:(0,t.jsx)(l,{data:a})}),(0,t.jsx)(d,{})]}),(0,t.jsx)("div",{className:"map-section",children:(0,t.jsx)(x,{data:r})})]}),(0,t.jsxs)("div",{className:"ai-features-section",children:[(0,t.jsx)("h2",{children:"Advanced Network Intelligence"}),(0,t.jsxs)("div",{className:"features-grid",children:[(0,t.jsxs)("div",{className:"feature-card",children:[(0,t.jsx)("h3",{children:"AI Network Assistant"}),(0,t.jsx)(m,{})]}),(0,t.jsxs)("div",{className:"feature-card",children:[(0,t.jsx)("h3",{children:"Predictive Analytics Engine"}),(0,t.jsx)(h,{})]})]})]})]})}}},e=>{e.O(0,[647,999,441,255,358],()=>e(e.s=6283)),_N_E=e.O()}]);